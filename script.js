const recipes = {
    "bliny": {
        title: "Домашние Блинчики",
        image: "блины.jpg",
        time: "35 минут",
        ingredients: [
            "Молоко - 500 мл",
            "Яйца - 2 шт",
            "Мука - 200 г",
            "Сахар - 2 ст.л.",
            "Соль - щепотка",
            "Масло - сливочное масло по вкусу"
        ],
        steps: [
            "Взбить 3 яйца и 2 столовых ложки сахара до появления пены.",
            "Добавить 100 грамм муки и 250 мл молока, перемешать.",
            "Добавить оставшиеся 100 грамм муки и 250 мл молока, размешать до однородной массы, разбив максимальное количество комочков.",
            "Дать тесту настояться 20 минут. Еще раз перемешать.",
            "Разогреть сковороду и выпекать блины на сильном огне. Каждый блин при выкладывании промазывать куском сливочного масла.",
            "Подавать блины с вареньем, сметаной, сгущенкой по вкусу."
        ]
    },
    "borsh": {
        title: "Борщ",
        image: "борщ.jpg",
        time: "90 минут",
        ingredients: [
            "Говядина - 500 г",
            "Свёкла - 1 шт.",
            "Картофель - 2 шт.",
            "Капуста белокочанная - 200 г",
            "Морковь - 1 шт.",
            "Лук репчатый - 1 шт.",
            "Томатная паста - 1 ст. ложка",
            "Масло растительное - 2 ст. ложки",
            "Уксус - 1 ч. ложка",
            "Лавровый лист - 1 шт.",
            "Перец чёрный горошком - 2-3 шт.",
            "Соль - 2 ч. ложки (по вкусу)",
            "Вода - 1,5 л",
            "Зелень укропа и/или петрушки (для подачи) - 3-4 веточки",
            "Сметана (для подачи) - 2 ст. ложки"
        ],
        steps: [
            "Подготовить продукты.",
            "Говядину нарезать крупными кусками.",
            "Залить мясо в кастрюле холодной водой, довести до кипения, снять пену. Варить бульон примерно 1,5 часа на небольшом огне.",
            "В конце варки посолить.",
            "Свёклу очистить, нарезать соломкой.",
            "Морковь очистить, натереть на крупной терке.",
            "Лук очистить, мелко нарезать.",
            "Капусту нашинковать.",
            "Картофель очистить, нарезать кубиками.",
            "На сковороде разогреть растительное масло. Свёклу, морковь и лук выложить на сковороду и тушить на среднем огне (пассеровать), помешивая, 5-7 минут.",
            "В конце добавить уксус и томатную пасту. Перемешать. Готовить овощи ещё 3-4 минуты, помешивая.",
            "В кипящий бульон выложить картофель и капусту, варить 10 минут. (Молодую капусту добавлять за 5 минут до окончания приготовления борща.)",
            "Затем добавить пассерованные овощи, лавровый лист и перец. Варить борщ с говядиной еще 5-7 минут.",
            "Готовому борщу дать настояться 10-15 минут. Зелень нарезать.",
            "Разлить борщ по тарелкам, заправить сметаной и посыпать зеленью."
        ],
    },
    "pirozhki": {
        title: "Пирожки с капустой",
        image: "пирожки.jpg",
        time: "90 минут",
        ingredients: [
            "Мука - 500 г",
            "Молоко тёплое - 250 мл",
            "Дрожжи сухие - 1,5 ч.л.",
            "Яйца - 2 шт",
            "Сахар - 1 ст.л.",
            "Соль - 1 ч.л.",
            "Масло растительное - 50 мл",
            "Капуста белокочанная - 500 г",
            "Лук репчатый - 1 шт",
            "Морковь - 1 шт",
            "Соль и перец - по вкусу",
            "Яйцо для смазки - 1 шт"
        ],
        steps: [
            "Смешать тёплое молоко с дрожжами и сахаром, оставить на 10 минут.",
            "Добавить яйца, соль, масло и постепенно всыпать муку, замесить мягкое тесто.",
            "Оставить тесто в тёплом месте на 1 час.",
            "Нашинковать капусту, натереть морковь, нарезать лук.",
            "Обжарить лук и морковь, добавить капусту, тушить 15-20 минут.",
            "Посолить и поперчить начинку, остудить.",
            "Разделить тесто на порции, раскатать кружки.",
            "Выложить начинку, защипнуть края.",
            "Оставить на расстойку на 20 минут.",
            "Смазать взбитым яйцом.",
            "Выпекать при 180°C 20-25 минут до золотистого цвета."
        ]
    },
    "myaso": {
        title: "Мясо по-французски",
        image: "мясо по французски.jpg",
        time: "60 минут",
        ingredients: [
            "Свинина (карбонад) - 600 г",
            "Картофель - 4-5 шт",
            "Лук репчатый - 2 шт",
            "Сыр твёрдый - 200 г",
            "Майонез - 150 г",
            "Помидоры - 2 шт",
            "Соль, перец - по вкусу",
            "Растительное масло - для смазки"
        ],
        steps: [
            "Мясо нарезать порционными кусками, отбить.",
            "Картофель нарезать кружочками, лук кольцами.",
            "Смазать противень маслом, выложить картофель.",
            "На картофель выложить отбивные, посолить, поперчить.",
            "Сверху выложить лук и кружочки помидоров.",
            "Смазать майонезом, посыпать тёртым сыром.",
            "Запекать при 180°C 45-50 минут до золотистой корочки."
        ]
    },
    "kotleta": {
        title: "Котлета по-киевски",
        image: "котлета по киевски.webp",
        time: "50 минут",
        ingredients: [
            "Куриное филе - 4 шт",
            "Сливочное масло - 100 г",
            "Зелень (укроп, петрушка) - 30 г",
            "Яйца - 2 шт",
            "Панировочные сухари - 100 г",
            "Мука - 50 г",
            "Соль, перец - по вкусу",
            "Растительное масло - для жарки"
        ],
        steps: [
            "Размягчённое масло смешать с рубленой зеленью.",
            "Сформировать из масла брусочки, заморозить.",
            "Филе отбить, посолить, поперчить.",
            "В центр выложить замороженное масло, завернуть конвертом.",
            "Обвалять в муке, яйце и сухарях.",
            "Жарить во фритюре 7-8 минут до золотистого цвета.",
            "Довести до готовности в духовке при 180°C 10-12 минут."
        ]
    },
    "pizza": {
        title: "Пицца с ветчиной и грибами",
        image: "пицца ветчина.webp",
        time: "40 минут",
        ingredients: [
            "Тесто для пиццы - 300 г",
            "Томатный соус - 100 г",
            "Ветчина - 150 г",
            "Грибы шампиньоны - 150 г",
            "Сыр моцарелла - 150 г",
            "Лук репчатый - 1 шт",
            "Масло оливковое - 2 ст.л.",
            "Орегано - по вкусу",
            "Соль, перец - по вкусу"
        ],
        steps: [
            "Раскатать тесто в круг толщиной 0,5 см.",
            "Смазать томатным соусом.",
            "Нарезать ветчину, грибы и лук.",
            "Обжарить грибы с луком.",
            "Выложить начинку на тесто.",
            "Посыпать тёртым сыром.",
            "Сбрызнуть оливковым маслом, посыпать орегано.",
            "Выпекать при 220°C 15-20 минут до золотистой корочки."
        ]
    },
    "shashlyk": {
        title: "Шашлык из свинины",
        image: "шашлык.jpg",
        time: "4 часа",
        ingredients: [
            "Свинина (шея) - 1.5 кг",
            "Лук репчатый - 3 шт",
            "Уксус 9% - 2 ст.л.",
            "Чёрный перец - по вкусу",
            "Соль - по вкусу",
            "Специи для шашлыка - по вкусу"
        ],
        steps: [
            "Мясо нарезать крупными кусками.",
            "Лук нарезать кольцами.",
            "Смешать мясо с луком, добавить специи, соль, перец и уксус.",
            "Мариновать 3-4 часа в холодильнике.",
            "Нанизать на шампуры.",
            "Жарить на углях 20-25 минут, периодически переворачивая."
        ]
    },
    "pelmeni": {
        title: "Домашние пельмени",
        image: "пельмени.jpg",
        time: "120 минут",
        ingredients: [
            "Мука - 600 г",
            "Яйца - 2 шт",
            "Вода - 200 мл",
            "Соль - 1 ч.л.",
            "Фарш (свинина/говядина) - 500 г",
            "Лук репчатый - 2 шт",
            "Перец чёрный - по вкусу"
        ],
        steps: [
            "Замесить тесто из муки, яиц, воды и соли.",
            "Оставить на 30 минут под полотенцем.",
            "Приготовить фарш: смешать мясо с измельчённым луком, посолить, поперчить.",
            "Раскатать тесто, вырезать кружки.",
            "Положить начинку, защипнуть края.",
            "Варить в подсоленной воде 7-8 минут после всплытия."
        ]
    }

};


document.addEventListener("DOMContentLoaded", () => {
    const urlParams = new URLSearchParams(window.location.search);
    const recipeId = urlParams.get("id");
    if (recipeId) {
        if (!recipes[recipeId]) {
            document.getElementById("recipe-title").textContent = "Рецепт не найден";
            return;
        }

    const recipe = recipes[recipeId];

    document.getElementById("recipe-title").textContent = recipe.title;
    document.getElementById("recipe-image").src = `static/images/${recipe.image}`;
    document.getElementById("recipe-image").alt = recipe.title;

    const ingredientsList = document.getElementById("recipe-ingredients");
    recipe.ingredients.forEach(ingredient => {
        const li = document.createElement("li");
        li.textContent = ingredient;
        ingredientsList.appendChild(li);
    });

    const stepsList = document.getElementById("recipe-steps");
    recipe.steps.forEach(step => {
        const li = document.createElement("li");
        li.textContent = step;
        stepsList.appendChild(li);
    });
    }
    else {
        const searchInput = document.querySelector('.search-input');
        const searchButton = document.querySelector('.search-button');
        const recipesContainer = document.querySelector('.recipes');
        const allRecipeCards = document.querySelectorAll('.recipe-card');
    
        function performSearch() {
            const searchTerm = searchInput.value.toLowerCase();
            let visibleCount = 0;
    
            allRecipeCards.forEach(card => {
                const title = card.querySelector('h2').textContent.toLowerCase();
                const description = card.querySelector('p:last-child').textContent.toLowerCase();
    
                if (title.includes(searchTerm) || description.includes(searchTerm)) {
                    card.style.display = 'block';
                    card.style.order = visibleCount;
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                    card.style.order = 999;
                }
            });
    
            if (visibleCount === 0 && searchTerm !== '') {
                if (!document.querySelector('.no-results')) {
                    const noResults = document.createElement('div');
                    noResults.className = 'no-results';
                    noResults.textContent = 'Рецепты не найдены';
                    noResults.style.cssText = `
                        grid-column: 1 / -1;
                        text-align: center;
                        color: #f3eedb;
                        font-size: 1.2em;
                        padding: 20px;
                        width: 100%;
                    `;
                    recipesContainer.appendChild(noResults);
                }
            } else {
                const noResults = document.querySelector('.no-results');
                if (noResults) {
                    noResults.remove();
                }
            }
        }
    
        searchButton.addEventListener('click', performSearch);
    
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
    
        searchInput.addEventListener('input', performSearch);
    }
});